<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<script type="text/javascript">
var a = 0;
var b = 0;
var getCabinSetData = function(){
	var searchJson = getParameter();
	if(searchJson.lcl_Dpt_Day == ""||searchJson.lcl_Dpt_Day == "请选择月份"){
		alert('请选择月份');
		return;
	}
	if(searchJson.dpt_AirPt_Cd == ""||searchJson.dpt_AirPt_Cd == "请选择机场"){
		alert('请选择始发地');
		return;
	}
	if(searchJson.arrv_Airpt_Cd == ""||searchJson.arrv_Airpt_Cd == "请选择机场"){
		alert('请选择到达地');
		return;
	}
	if(searchJson.flt_nbr == ""||searchJson.flt_nbr=="汇总"){
		alert('请选择航班号');
		return;
	}
	$.ajax({
		url:'${pageContext.request.contextPath}/getCabinSeatSetData',
		data:searchJson,
		type:'post',
		success:function(data){
			$("#positionsset").empty();
			if(data!=null){
				if(data.opResult!=1){
					if(data.list!=null&&data.list.length>0){
						var list = data.list;
						for(var i=0;i<list.length;i++){
							if(list[i]!=null){
								var goList = list[i].goList;
								var returnList = list[i].returnList;
								if(goList!=null&&goList.length>0){
									var operation = '<form id="form'+(i+1)+'" method="post" action="${pageContext.request.contextPath}/saveCabinSeatSetData">';
									//添加隐藏域
									operation += '<input id="siteCount'+(i+1)+'" type="hidden" value="'+list[i].siteCount+'"/><input id="totalTime'+(i+1)+'" type="hidden" value="'+list[i].totalTime+'"/><input name="time_Id" type="hidden" value="'+list[i].salePlan.timeId+'"/><input name="time_Id"  type="hidden" value="'+list[i].rSalePlan.timeId+'"/><input hidden="hidden" value="'+list[i].yb+'" id="yb'+(i+1)+'"/>';
									operation += '<input type="hidden" name="flt_Nbr" value="'+list[i].goFltNbr+'"/><input type="hidden" name="flt_Nbr" value="'+list[i].returnFltNbr+'"/><input type="hidden" name="flt_Rte_Cd" value="'+list[i].goFlt_Rte_Cd+'"/><input type="hidden" name="flt_Rte_Cd" value="'+list[i].returnFlt_Rte_Cd+'"/><input id="goFltDirect" name="flt_Direct'+'" type="hidden" value="'+list[i].goFltDirect+'"/><input type="hidden" value="'+list[i].returnFltDirect+'" id="returnFltDirect'+(i+1)+'" name="flt_Direct"/>';
									for(var j=0;j<goList.length;j++){
										if(j==0){
											operation +='<table class="table table-hover table-striped salePlanTable" style="overflow: scroll;"><tr><td colspan="31">'+(parseInt(searchJson.lcl_Dpt_Day.substring(0,4))-3)+'年历史均班营收</td></tr>';
											operation +='<tr><td>航班日期</td><td>航段</td><td>执行班次</td><td>Y舱价格</td><td>团队价格</td><td>F</td><td>Y</td><td>B</td><td>H</td><td>K</td><td>L</td><td>M</td><td>Q</td><td>X</td><td>U</td><td>E</td><td>T</td><td>Z</td><td>特殊</td><td>散团人数/班</td><td>散客/班</td><td>散客收入/班</td><td>团队收入/班</td><td>平均折扣</td><td>散团收入/班</td><td>小时收入</td><td>客座率/班</td><td>补贴/班</td><td>总补贴/月</td>	</tr>';
											operation +='<tr><td colspan="2">折扣</td><td></td><td></td><td></td><td>150%</td><td>100%</td><td>90%</td><td>85%</td><td>80%</td><td>75%</td><td>70%</td><td>60%</td><td>50%</td><td>45%</td><td>40%</td><td>30%</td><td>20%</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td rowspan="4">'+(list[i].totalTime==0?0:((goList[j].totalNumber+returnList[j].totalNumber)/list[i].totalTime).toFixed(2))+'</td><td rowspan="4">'+goList[j].grp_Fng_Rte+'</td><td rowspan="4">'+(list[i].hourCost*list[i].totalTime-goList[j].totalNumber-returnList[j].totalNumber).toFixed(2)+'</td><td rowspan="4">'+((list[i].hourCost*list[i].totalTime-goList[j].totalNumber-returnList[j].totalNumber)*(parseInt(goList[j].ech_Cls_Grp)+parseInt(returnList[j].ech_Cls_Grp))/2)+'</td></tr>';
											//operation +='<tr><td rowspan="2">'+(parseInt(searchJson.lcl_Dpt_Day.substring(5)))+'月</td><td>'+(i==0?(searchJson.dpt_AirPt_Cd+'-'+searchJson.arrv_Airpt_Cd):(i==1?(searchJson.dpt_AirPt_Cd+'-'+searchJson.pas_stp):(searchJson.pas_stp+'-'+searchJson.arrv_Airpt_Cd)))+'</td><td>'+goList[j].ech_Cls_Grp+'</td><td>'+list[i].yb+'</td><td>'+(parseInt(goList[j].grp_Nbr)==0?0:parseFloat(goList[j].grp_Ine)/parseInt(goList[j].grp_Nbr)).toFixed(2)+'</td><td>'+goList[j].two_Tak_Ppt+'</td><td>'+goList[j].ful_Pce_Ppt+'</td><td>'+goList[j].nne_Dnt_Ppt+'</td><td>'+goList[j].eht_Five_Dnt_Ppt+'</td><td>'+goList[j].eht_Dnt_Ppt+'</td><td>'+goList[j].sen_Five_Dnt_Ppt+'</td><td>'+goList[j].sen_Dnt_Ppt+'</td><td>'+goList[j].six_Dnt_Ppt+'</td><td>'+goList[j].fve_Dnt_Ppt+'</td><td>'+goList[j].fur_Fve_Dnt_Ppt+'</td><td>'+goList[j].fur_Dnt_Ppt+'</td><td>'+goList[j].thr_Dnt_Ppt+'</td><td>'+goList[j].two_Dnt_Ppt+'</td><td>'+goList[j].sal_Tak_Ppt+'</td><td>'+goList[j].pgs_Per_Cls+'</td><td>'+(parseInt(goList[j].pgs_Per_Cls)-parseInt(goList[j].grp_Nbr))+'</td><td>'+(parseFloat(goList[j].totalNumber-goList[j].grp_Ine)).toFixed(2)+'</td><td>'+parseFloat(goList[j].grp_Ine).toFixed(2)+'</td><td>'+(parseInt(goList[j].pgs_Per_Cls)==0?0:parseFloat(goList[j].totalNumber)/parseInt(goList[j].pgs_Per_Cls)/list[i].yb).toFixed(2)+'</td><td>'+goList[j].totalNumber.toFixed(2)+'</td></tr>';
											//operation +='<tr><td>'+(i==0?(searchJson.arrv_Airpt_Cd+'-'+searchJson.dpt_AirPt_Cd):(i==1?(searchJson.pas_stp+'-'+searchJson.dpt_AirPt_Cd):(searchJson.arrv_Airpt_Cd+'-'+searchJson.pas_stp)))+'</td><td>'+returnList[j].ech_Cls_Grp+'</td><td>'+list[i].rYb+'</td><td>'+(parseInt(returnList[j].grp_Nbr)==0?0:parseFloat(returnList[j].grp_Ine)/parseInt(returnList[j].grp_Nbr)).toFixed(2)+'</td><td>'+returnList[j].two_Tak_Ppt+'</td><td>'+returnList[j].ful_Pce_Ppt+'</td><td>'+returnList[j].nne_Dnt_Ppt+'</td><td>'+returnList[j].eht_Five_Dnt_Ppt+'</td><td>'+returnList[j].eht_Dnt_Ppt+'</td><td>'+returnList[j].sen_Five_Dnt_Ppt+'</td><td>'+returnList[j].sen_Dnt_Ppt+'</td><td>'+returnList[j].six_Dnt_Ppt+'</td><td>'+returnList[j].fve_Dnt_Ppt+'</td><td>'+returnList[j].fur_Fve_Dnt_Ppt+'</td><td>'+returnList[j].fur_Dnt_Ppt+'</td><td>'+returnList[j].thr_Dnt_Ppt+'</td><td>'+returnList[j].two_Dnt_Ppt+'</td><td>'+returnList[j].sal_Tak_Ppt+'</td><td>'+returnList[j].pgs_Per_Cls+'</td><td>'+(parseInt(returnList[j].pgs_Per_Cls)-parseInt(returnList[j].grp_Nbr))+'</td><td>'+(parseFloat(returnList[j].totalNumber)-parseFloat(returnList[j].grp_Ine)).toFixed(2)+'</td><td>'+parseFloat(returnList[j].grp_Ine).toFixed(2)+'</td><td>'+(parseInt(returnList[j].pgs_Per_Cls)==0?0:parseFloat(returnList[j].totalNumber).toFixed(2)/parseInt(returnList[j].pgs_Per_Cls)/list[i].rYb).toFixed(2)+'</td><td>'+returnList[j].totalNumber.toFixed(2)+'</td></tr>';
											//operation +='<tr><td colspan="2">合计</td><td>'+(parseInt(goList[j].ech_Cls_Grp)+parseInt(returnList[j].ech_Cls_Grp))/2+'</td><td></td><td></td><td>'+(goList[j].two_Tak_Ppt+returnList[j].two_Tak_Ppt)+'</td><td>'+(goList[j].ful_Pce_Ppt+returnList[j].ful_Pce_Ppt)+'</td><td>'+(goList[j].nne_Dnt_Ppt+returnList[j].nne_Dnt_Ppt)+'</td><td>'+(goList[j].eht_Five_Dnt_Ppt+returnList[j].eht_Five_Dnt_Ppt)+'</td><td>'+(goList[j].eht_Dnt_Ppt+returnList[j].eht_Dnt_Ppt)+'</td><td>'+(goList[j].sen_Five_Dnt_Ppt+returnList[j].sen_Five_Dnt_Ppt)+'</td><td>'+(goList[j].sen_Dnt_Ppt+returnList[j].sen_Dnt_Ppt)+'</td><td>'+(goList[j].six_Dnt_Ppt+returnList[j].six_Dnt_Ppt)+'</td><td>'+(goList[j].fve_Dnt_Ppt+returnList[j].fve_Dnt_Ppt)+'</td><td>'+(goList[j].fur_Fve_Dnt_Ppt+returnList[j].fur_Fve_Dnt_Ppt)+'</td><td>'+(goList[j].fur_Dnt_Ppt+returnList[j].fur_Dnt_Ppt)+'</td><td>'+(goList[j].thr_Dnt_Ppt+returnList[j].thr_Dnt_Ppt)+'</td><td>'+(goList[j].two_Dnt_Ppt+returnList[j].two_Dnt_Ppt)+'</td><td>'+(goList[j].sal_Tak_Ppt+returnList[j].sal_Tak_Ppt)+'</td><td>'+(parseInt(goList[j].pgs_Per_Cls)+parseInt(returnList[j].pgs_Per_Cls))+'</td><td>'+((parseInt(goList[j].pgs_Per_Cls)-parseInt(goList[j].grp_Nbr))+(parseInt(returnList[j].pgs_Per_Cls)-parseInt(returnList[j].grp_Nbr)))+'</td><td>'+(parseFloat(goList[j].totalNumber)-parseFloat(goList[j].grp_Ine)+parseFloat(returnList[j].totalNumber)-parseFloat(returnList[j].grp_Ine)).toFixed(2)+'</td><td>'+(goList[j].grp_Ine+returnList[j].grp_Ine).toFixed(2)+'</td><td>'+((parseFloat(goList[j].totalNumber)+parseFloat(returnList[j].totalNumber))>0?(parseFloat(goList[j].totalNumber)+parseFloat(returnList[j].totalNumber))/(parseInt(goList[j].pgs_Per_Cls)*parseFloat(list[i].yb)+parseInt(returnList[j].pgs_Per_Cls)*parseFloat(list[i].yb)):0).toFixed(2)+'</td><td>'+(goList[j].totalNumber+returnList[j].totalNumber).toFixed(2)+'</td></tr></table>';
											operation +='<tr><td rowspan="2">'+(parseInt(searchJson.lcl_Dpt_Day.substring(5)))+'月</td><td>'+(i==0?(searchJson.dpt_AirPt_Cd+'-'+searchJson.arrv_Airpt_Cd):(i==1?(searchJson.dpt_AirPt_Cd+'-'+searchJson.pas_stp):(searchJson.pas_stp+'-'+searchJson.arrv_Airpt_Cd)))+'</td><td>'+goList[j].ech_Cls_Grp+'</td><td>'+list[i].yb+'</td><td>'+(goList[j].grp_Nbr==0?0:(goList[j].grp_Ine/goList[j].grp_Nbr).toFixed(2))+'</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>'+goList[j].grp_Nbr.toFixed(0)+'</td><td>'+goList[j].pgs_Per_Cls.toFixed(0)+'</td><td>'+(goList[j].pgs_Per_Cls-goList[j].grp_Nbr).toFixed(0)+'</td><td>'+(goList[j].grp_Ine==null?goList[j].totalNumber.toFixed(2):parseFloat(goList[j].totalNumber-goList[j].grp_Ine).toFixed(2))+'</td><td>'+(goList[j].grp_Ine==null?0:parseFloat(goList[j].grp_Ine)).toFixed(2)+'</td><td>'+(parseInt(goList[j].pgs_Per_Cls)==0?0:parseFloat(goList[j].totalNumber)/parseInt(goList[j].pgs_Per_Cls)/list[i].yb).toFixed(2)+'</td><td>'+goList[j].totalNumber.toFixed(2)+'</td></tr>';
											operation +='<tr><td>'+(i==0?(searchJson.arrv_Airpt_Cd+'-'+searchJson.dpt_AirPt_Cd):(i==1?(searchJson.pas_stp+'-'+searchJson.dpt_AirPt_Cd):(searchJson.arrv_Airpt_Cd+'-'+searchJson.pas_stp)))+'</td><td>'+returnList[j].ech_Cls_Grp+'</td><td>'+list[i].rYb+'</td><td>'+(returnList[j].grp_Nbr==0?0:(returnList[j].grp_Ine/returnList[j].grp_Nbr).toFixed(2))+'</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>'+returnList[j].grp_Nbr.toFixed(0)+'</td><td>'+returnList[j].pgs_Per_Cls.toFixed(0)+'</td><td>'+(returnList[j].pgs_Per_Cls-returnList[j].grp_Nbr).toFixed(0)+'</td><td>'+(returnList[j].grp_Ine==null?returnList[j].totalNumber.toFixed(2):(parseFloat(returnList[j].totalNumber)-parseFloat(returnList[j].grp_Ine)).toFixed(2))+'</td><td>'+(returnList[j].grp_Ine==null?0:parseFloat(returnList[j].grp_Ine)).toFixed(2)+'</td><td>'+(parseInt(returnList[j].pgs_Per_Cls)==0?0:parseFloat(returnList[j].totalNumber).toFixed(2)/parseInt(returnList[j].pgs_Per_Cls)/list[i].rYb).toFixed(2)+'</td><td>'+returnList[j].totalNumber.toFixed(2)+'</td></tr>';
											operation +='<tr><td colspan="2">合计</td><td>'+(parseInt(goList[j].ech_Cls_Grp)+parseInt(returnList[j].ech_Cls_Grp))/2+'</td><td></td><td></td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>'+(goList[j].grp_Nbr+returnList[j].grp_Nbr).toFixed(0)+'</td><td>'+(goList[j].pgs_Per_Cls+returnList[j].pgs_Per_Cls).toFixed(0)+'</td><td>'+(goList[j].pgs_Per_Cls-goList[j].grp_Nbr+returnList[j].pgs_Per_Cls-returnList[j].grp_Nbr).toFixed(0)+'</td><td>'+(parseFloat(goList[j].totalNumber)-parseFloat(goList[j].grp_Ine)+parseFloat(returnList[j].totalNumber)-parseFloat(returnList[j].grp_Ine)).toFixed(2)+'</td><td>'+(goList[j].grp_Ine+returnList[j].grp_Ine).toFixed(2)+'</td><td>'+((parseFloat(goList[j].totalNumber)+parseFloat(returnList[j].totalNumber))>0?(parseFloat(goList[j].totalNumber)+parseFloat(returnList[j].totalNumber))/(parseInt(goList[j].pgs_Per_Cls)*parseFloat(list[i].yb)+parseInt(returnList[j].pgs_Per_Cls)*parseFloat(list[i].yb)):0).toFixed(2)+'</td><td>'+(goList[j].totalNumber+returnList[j].totalNumber).toFixed(2)+'</td></tr></table>';
										}else if(j==1){
											operation +='<table class="table table-hover table-striped salePlanTable" style="overflow: scroll;"><tr><td colspan="31">'+(parseInt(searchJson.lcl_Dpt_Day.substring(0,4))-2)+'年历史均班营收</td></tr>';
											operation +='<tr><td>航班日期</td><td>航段</td><td>执行班次</td><td>Y舱价格</td><td>团队价格</td><td>F</td><td>Y</td><td>B</td><td>H</td><td>K</td><td>L</td><td>M</td><td>Q</td><td>X</td><td>U</td><td>E</td><td>T</td><td>Z</td><td>特殊</td><td>散团人数/班</td><td>散客/班</td><td>散客收入/班</td><td>团队收入/班</td><td>平均折扣</td><td>散团收入/班</td><td>小时收入</td><td>客座率/班</td><td>补贴/班</td><td>总补贴/月</td>	</tr>';
											operation +='<tr><td colspan="2">折扣</td><td></td><td></td><td></td><td>150%</td><td>100%</td><td>90%</td><td>85%</td><td>80%</td><td>75%</td><td>70%</td><td>60%</td><td>50%</td><td>45%</td><td>40%</td><td>30%</td><td>20%</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td rowspan="4">'+(list[i].totalTime==0?0:((goList[j].totalNumber+returnList[j].totalNumber)/list[i].totalTime).toFixed(2))+'</td><td rowspan="4">'+goList[j].grp_Fng_Rte+'</td><td rowspan="4">'+(list[i].hourCost*list[i].totalTime-goList[j].totalNumber-returnList[j].totalNumber).toFixed(2)+'</td><td rowspan="4">'+((list[i].hourCost*list[i].totalTime-goList[j].totalNumber-returnList[j].totalNumber)*(parseInt(goList[j].ech_Cls_Grp)+parseInt(returnList[j].ech_Cls_Grp))/2)+'</td></tr>';
											//operation +='<tr><td rowspan="2">'+(parseInt(searchJson.lcl_Dpt_Day.substring(5)))+'月</td><td>'+(i==0?(searchJson.dpt_AirPt_Cd+'-'+searchJson.arrv_Airpt_Cd):(i==1?(searchJson.dpt_AirPt_Cd+'-'+searchJson.pas_stp):(searchJson.pas_stp+'-'+searchJson.arrv_Airpt_Cd)))+'</td><td>'+goList[j].ech_Cls_Grp+'</td><td>'+list[i].yb+'</td><td>'+(parseInt(goList[j].grp_Nbr)==0?0:parseFloat(goList[j].grp_Ine)/parseInt(goList[j].grp_Nbr)).toFixed(2)+'</td><td>'+goList[j].two_Tak_Ppt+'</td><td>'+goList[j].ful_Pce_Ppt+'</td><td>'+goList[j].nne_Dnt_Ppt+'</td><td>'+goList[j].eht_Five_Dnt_Ppt+'</td><td>'+goList[j].eht_Dnt_Ppt+'</td><td>'+goList[j].sen_Five_Dnt_Ppt+'</td><td>'+goList[j].sen_Dnt_Ppt+'</td><td>'+goList[j].six_Dnt_Ppt+'</td><td>'+goList[j].fve_Dnt_Ppt+'</td><td>'+goList[j].fur_Fve_Dnt_Ppt+'</td><td>'+goList[j].fur_Dnt_Ppt+'</td><td>'+goList[j].thr_Dnt_Ppt+'</td><td>'+goList[j].two_Dnt_Ppt+'</td><td>'+goList[j].sal_Tak_Ppt+'</td><td>'+goList[j].pgs_Per_Cls+'</td><td>'+(parseInt(goList[j].pgs_Per_Cls)-parseInt(goList[j].grp_Nbr))+'</td><td>'+(parseFloat(goList[j].totalNumber)-parseFloat(goList[j].grp_Ine)).toFixed(2)+'</td><td>'+goList[j].grp_Ine.toFixed(2)+'</td><td>'+(parseInt(goList[j].pgs_Per_Cls)==0?0:parseFloat(goList[j].totalNumber)/parseInt(goList[j].pgs_Per_Cls)/list[i].yb).toFixed(2)+'</td><td>'+goList[j].totalNumber.toFixed(2)+'</td></tr>';
											//operation +='<tr><td>'+(i==0?(searchJson.arrv_Airpt_Cd+'-'+searchJson.dpt_AirPt_Cd):(i==1?(searchJson.pas_stp+'-'+searchJson.dpt_AirPt_Cd):(searchJson.arrv_Airpt_Cd+'-'+searchJson.pas_stp)))+'</td><td>'+returnList[j].ech_Cls_Grp+'</td><td>'+list[i].rYb+'</td><td>'+(parseInt(returnList[j].grp_Nbr)==0?0:parseFloat(returnList[j].grp_Ine)/parseInt(returnList[j].grp_Nbr)).toFixed(2)+'</td><td>'+returnList[j].two_Tak_Ppt+'</td><td>'+returnList[j].ful_Pce_Ppt+'</td><td>'+returnList[j].nne_Dnt_Ppt+'</td><td>'+returnList[j].eht_Five_Dnt_Ppt+'</td><td>'+returnList[j].eht_Dnt_Ppt+'</td><td>'+returnList[j].sen_Five_Dnt_Ppt+'</td><td>'+returnList[j].sen_Dnt_Ppt+'</td><td>'+returnList[j].six_Dnt_Ppt+'</td><td>'+returnList[j].fve_Dnt_Ppt+'</td><td>'+returnList[j].fur_Fve_Dnt_Ppt+'</td><td>'+returnList[j].fur_Dnt_Ppt+'</td><td>'+returnList[j].thr_Dnt_Ppt+'</td><td>'+returnList[j].two_Dnt_Ppt+'</td><td>'+returnList[j].sal_Tak_Ppt+'</td><td>'+returnList[j].pgs_Per_Cls+'</td><td>'+(parseInt(returnList[j].pgs_Per_Cls)-parseInt(returnList[j].grp_Nbr)).toFixed(2)+'</td><td>'+(parseFloat(returnList[j].totalNumber)-parseFloat(returnList[j].grp_Ine)).toFixed(2)+'</td><td>'+parseFloat(returnList[j].grp_Ine).toFixed(2)+'</td><td>'+(parseInt(returnList[j].pgs_Per_Cls)==0?0:parseFloat(returnList[j].totalNumber)/parseInt(returnList[j].pgs_Per_Cls)/list[i].rYb).toFixed(2)+'</td><td>'+returnList[j].totalNumber.toFixed(2)+'</td></tr>';
											//operation +='<tr><td colspan="2">合计</td><td>'+(parseInt(goList[j].ech_Cls_Grp)+parseInt(returnList[j].ech_Cls_Grp))/2+'</td><td></td><td></td><td>'+(goList[j].two_Tak_Ppt+returnList[j].two_Tak_Ppt)+'</td><td>'+(goList[j].ful_Pce_Ppt+returnList[j].ful_Pce_Ppt)+'</td><td>'+(goList[j].nne_Dnt_Ppt+returnList[j].nne_Dnt_Ppt)+'</td><td>'+(goList[j].eht_Five_Dnt_Ppt+returnList[j].eht_Five_Dnt_Ppt)+'</td><td>'+(goList[j].eht_Dnt_Ppt+returnList[j].eht_Dnt_Ppt)+'</td><td>'+(goList[j].sen_Five_Dnt_Ppt+returnList[j].sen_Five_Dnt_Ppt)+'</td><td>'+(goList[j].sen_Dnt_Ppt+returnList[j].sen_Dnt_Ppt)+'</td><td>'+(goList[j].six_Dnt_Ppt+returnList[j].six_Dnt_Ppt)+'</td><td>'+(goList[j].fve_Dnt_Ppt+returnList[j].fve_Dnt_Ppt)+'</td><td>'+(goList[j].fur_Fve_Dnt_Ppt+returnList[j].fur_Fve_Dnt_Ppt)+'</td><td>'+(goList[j].fur_Dnt_Ppt+returnList[j].fur_Dnt_Ppt)+'</td><td>'+(goList[j].thr_Dnt_Ppt+returnList[j].thr_Dnt_Ppt)+'</td><td>'+(goList[j].two_Dnt_Ppt+returnList[j].two_Dnt_Ppt)+'</td><td>'+(goList[j].sal_Tak_Ppt+returnList[j].sal_Tak_Ppt)+'</td><td>'+(parseInt(goList[j].pgs_Per_Cls)+parseInt(returnList[j].pgs_Per_Cls))+'</td><td>'+((parseInt(goList[j].pgs_Per_Cls)-parseInt(goList[j].grp_Nbr))+(parseInt(returnList[j].pgs_Per_Cls)-parseInt(returnList[j].grp_Nbr)))+'</td><td>'+(parseFloat(goList[j].totalNumber)-parseFloat(goList[j].grp_Ine)+parseFloat(returnList[j].totalNumber)-parseFloat(returnList[j].grp_Ine)).toFixed(2)+'</td><td>'+(goList[j].grp_Ine+returnList[j].grp_Ine).toFixed(2)+'</td><td>'+((parseFloat(goList[j].totalNumber)+parseFloat(returnList[j].totalNumber))>0?(parseFloat(goList[j].totalNumber)+parseFloat(returnList[j].totalNumber))/(parseInt(goList[j].pgs_Per_Cls)*parseFloat(list[i].yb)+parseInt(returnList[j].pgs_Per_Cls)*parseFloat(list[i].yb)):0).toFixed(2)+'</td><td>'+(goList[j].totalNumber+returnList[j].totalNumber).toFixed(2)+'</td></tr></table>';
											operation +='<tr><td rowspan="2">'+(parseInt(searchJson.lcl_Dpt_Day.substring(5)))+'月</td><td>'+(i==0?(searchJson.dpt_AirPt_Cd+'-'+searchJson.arrv_Airpt_Cd):(i==1?(searchJson.dpt_AirPt_Cd+'-'+searchJson.pas_stp):(searchJson.pas_stp+'-'+searchJson.arrv_Airpt_Cd)))+'</td><td>'+goList[j].ech_Cls_Grp+'</td><td>'+list[i].yb+'</td><td>'+(parseInt(goList[j].grp_Nbr)==0?0:parseFloat(goList[j].grp_Ine)/parseInt(goList[j].grp_Nbr)).toFixed(2)+'</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>'+goList[j].grp_Nbr.toFixed(0)+'</td><td>'+goList[j].pgs_Per_Cls.toFixed(0)+'</td><td>'+(parseInt(goList[j].pgs_Per_Cls)-parseInt(goList[j].grp_Nbr))+'</td><td>'+(parseFloat(goList[j].totalNumber)-parseFloat(goList[j].grp_Ine)).toFixed(2)+'</td><td>'+goList[j].grp_Ine.toFixed(2)+'</td><td>'+(parseInt(goList[j].pgs_Per_Cls)==0?0:parseFloat(goList[j].totalNumber)/parseInt(goList[j].pgs_Per_Cls)/list[i].yb).toFixed(2)+'</td><td>'+goList[j].totalNumber.toFixed(2)+'</td></tr>';
											operation +='<tr><td>'+(i==0?(searchJson.arrv_Airpt_Cd+'-'+searchJson.dpt_AirPt_Cd):(i==1?(searchJson.pas_stp+'-'+searchJson.dpt_AirPt_Cd):(searchJson.arrv_Airpt_Cd+'-'+searchJson.pas_stp)))+'</td><td>'+returnList[j].ech_Cls_Grp+'</td><td>'+list[i].rYb+'</td><td>'+(parseInt(returnList[j].grp_Nbr)==0?0:parseFloat(returnList[j].grp_Ine)/parseInt(returnList[j].grp_Nbr)).toFixed(2)+'</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>'+returnList[j].grp_Nbr.toFixed(0)+'</td><td>'+returnList[j].pgs_Per_Cls.toFixed(0)+'</td><td>'+(parseInt(returnList[j].pgs_Per_Cls)-parseInt(returnList[j].grp_Nbr)).toFixed(2)+'</td><td>'+(parseFloat(returnList[j].totalNumber)-parseFloat(returnList[j].grp_Ine)).toFixed(2)+'</td><td>'+parseFloat(returnList[j].grp_Ine).toFixed(2)+'</td><td>'+(parseInt(returnList[j].pgs_Per_Cls)==0?0:parseFloat(returnList[j].totalNumber)/parseInt(returnList[j].pgs_Per_Cls)/list[i].rYb).toFixed(2)+'</td><td>'+returnList[j].totalNumber.toFixed(2)+'</td></tr>';
											operation +='<tr><td colspan="2">合计</td><td>'+(parseInt(goList[j].ech_Cls_Grp)+parseInt(returnList[j].ech_Cls_Grp))/2+'</td><td></td><td></td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>'+(goList[j].grp_Nbr+returnList[j].grp_Nbr).toFixed(0)+'</td><td>'+(goList[j].pgs_Per_Cls+returnList[j].pgs_Per_Cls).toFixed(0)+'</td><td>'+(goList[j].pgs_Per_Cls-goList[j].grp_Nbr+returnList[j].pgs_Per_Cls-returnList[j].grp_Nbr).toFixed(0)+'</td><td>'+(parseFloat(goList[j].totalNumber)-parseFloat(goList[j].grp_Ine)+parseFloat(returnList[j].totalNumber)-parseFloat(returnList[j].grp_Ine)).toFixed(2)+'</td><td>'+(goList[j].grp_Ine+returnList[j].grp_Ine).toFixed(2)+'</td><td>'+((parseFloat(goList[j].totalNumber)+parseFloat(returnList[j].totalNumber))>0?(parseFloat(goList[j].totalNumber)+parseFloat(returnList[j].totalNumber))/(parseInt(goList[j].pgs_Per_Cls)*parseFloat(list[i].yb)+parseInt(returnList[j].pgs_Per_Cls)*parseFloat(list[i].yb)):0).toFixed(2)+'</td><td>'+(goList[j].totalNumber+returnList[j].totalNumber).toFixed(2)+'</td></tr></table>';
										}else if(j==2){
											operation +='<table class="table table-hover table-striped salePlanTable" style="overflow: scroll;"><tr><td colspan="31">'+(parseInt(searchJson.lcl_Dpt_Day.substring(5))==1?parseInt(searchJson.lcl_Dpt_Day.substring(0,4))-1:parseInt(searchJson.lcl_Dpt_Day.substring(0,4)))+'年环比均班营收</td></tr>';
											operation +='<tr><td>航班日期</td><td>航段</td><td>执行班次</td><td>Y舱价格</td><td>团队价格</td><td>F</td><td>Y</td><td>B</td><td>H</td><td>K</td><td>L</td><td>M</td><td>Q</td><td>X</td><td>U</td><td>E</td><td>T</td><td>Z</td><td>特殊</td><td>散团人数/班</td><td>散客/班</td><td>散客收入/班</td><td>团队收入/班</td><td>平均折扣</td><td>散团收入/班</td><td>小时收入</td><td>客座率/班</td><td>补贴/班</td><td>总补贴/月</td>	</tr>';
											operation +='<tr><td colspan="2">折扣</td><td></td><td></td><td></td><td>150%</td><td>100%</td><td>90%</td><td>85%</td><td>80%</td><td>75%</td><td>70%</td><td>60%</td><td>50%</td><td>45%</td><td>40%</td><td>30%</td><td>20%</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td rowspan="4">'+(list[i].totalTime==0?0:((goList[j].totalNumber+returnList[j].totalNumber)/list[i].totalTime).toFixed(2))+'</td><td rowspan="4">'+goList[j].grp_Fng_Rte+'</td><td rowspan="4">'+(list[i].hourCost*list[i].totalTime-goList[j].totalNumber-returnList[j].totalNumber).toFixed(2)+'</td><td rowspan="4">'+((list[i].hourCost*list[i].totalTime-goList[j].totalNumber-returnList[j].totalNumber)*(parseInt(goList[j].ech_Cls_Grp)+parseInt(returnList[j].ech_Cls_Grp))/2)+'</td></tr>';
											//operation +='<tr><td rowspan="2">'+(parseInt(searchJson.lcl_Dpt_Day.substring(5))==1?12:parseInt(searchJson.lcl_Dpt_Day.substring(5))-1)+'月</td><td>'+(i==0?(searchJson.dpt_AirPt_Cd+'-'+searchJson.arrv_Airpt_Cd):(i==1?(searchJson.dpt_AirPt_Cd+'-'+searchJson.pas_stp):(searchJson.pas_stp+'-'+searchJson.arrv_Airpt_Cd)))+'</td><td>'+goList[j].ech_Cls_Grp+'</td><td>'+list[i].yb+'</td><td>'+(parseInt(goList[j].grp_Nbr)==0?0:parseFloat(goList[j].grp_Ine)/parseInt(goList[j].grp_Nbr)).toFixed(2)+'</td><td>'+goList[j].two_Tak_Ppt+'</td><td>'+goList[j].ful_Pce_Ppt+'</td><td>'+goList[j].nne_Dnt_Ppt+'</td><td>'+goList[j].eht_Five_Dnt_Ppt+'</td><td>'+goList[j].eht_Dnt_Ppt+'</td><td>'+goList[j].sen_Five_Dnt_Ppt+'</td><td>'+goList[j].sen_Dnt_Ppt+'</td><td>'+goList[j].six_Dnt_Ppt+'</td><td>'+goList[j].fve_Dnt_Ppt+'</td><td>'+goList[j].fur_Fve_Dnt_Ppt+'</td><td>'+goList[j].fur_Dnt_Ppt+'</td><td>'+goList[j].thr_Dnt_Ppt+'</td><td>'+goList[j].two_Dnt_Ppt+'</td><td>'+goList[j].sal_Tak_Ppt+'</td><td>'+goList[j].pgs_Per_Cls+'</td><td>'+(parseInt(goList[j].pgs_Per_Cls)-parseInt(goList[j].grp_Nbr))+'</td><td>'+(parseFloat(goList[j].totalNumber)-parseFloat(goList[j].grp_Ine)).toFixed(2)+'</td><td>'+goList[j].grp_Ine.toFixed(2)+'</td><td>'+(parseInt(goList[j].pgs_Per_Cls)==0?0:parseFloat(goList[j].totalNumber)/parseInt(goList[j].pgs_Per_Cls)/list[i].yb).toFixed(2)+'</td><td>'+goList[j].totalNumber.toFixed(2)+'</td></tr>';
											//operation +='<tr><td>'+(i==0?(searchJson.arrv_Airpt_Cd+'-'+searchJson.dpt_AirPt_Cd):(i==1?(searchJson.pas_stp+'-'+searchJson.dpt_AirPt_Cd):(searchJson.arrv_Airpt_Cd+'-'+searchJson.pas_stp)))+'</td><td>'+returnList[j].ech_Cls_Grp+'</td><td>'+list[i].rYb+'</td><td>'+(parseInt(returnList[j].grp_Nbr)==0?0:parseFloat(returnList[j].grp_Ine)/parseInt(returnList[j].grp_Nbr)).toFixed(2)+'</td><td>'+returnList[j].two_Tak_Ppt+'</td><td>'+returnList[j].ful_Pce_Ppt+'</td><td>'+returnList[j].nne_Dnt_Ppt+'</td><td>'+returnList[j].eht_Five_Dnt_Ppt+'</td><td>'+returnList[j].eht_Dnt_Ppt+'</td><td>'+returnList[j].sen_Five_Dnt_Ppt+'</td><td>'+returnList[j].sen_Dnt_Ppt+'</td><td>'+returnList[j].six_Dnt_Ppt+'</td><td>'+returnList[j].fve_Dnt_Ppt+'</td><td>'+returnList[j].fur_Fve_Dnt_Ppt+'</td><td>'+returnList[j].fur_Dnt_Ppt+'</td><td>'+returnList[j].thr_Dnt_Ppt+'</td><td>'+returnList[j].two_Dnt_Ppt+'</td><td>'+returnList[j].sal_Tak_Ppt+'</td><td>'+returnList[j].pgs_Per_Cls+'</td><td>'+(parseInt(returnList[j].pgs_Per_Cls)-parseInt(returnList[j].grp_Nbr))+'</td><td>'+(parseFloat(returnList[j].totalNumber)-parseFloat(returnList[j].grp_Ine)).toFixed(2)+'</td><td>'+returnList[j].grp_Ine.toFixed(2)+'</td><td>'+(parseInt(returnList[j].pgs_Per_Cls)==0?0:parseFloat(returnList[j].totalNumber)/parseInt(returnList[j].pgs_Per_Cls)/list[i].rYb).toFixed(2)+'</td><td>'+returnList[j].totalNumber.toFixed(2)+'</td></tr>';
											//operation +='<tr><td colspan="2">合计</td><td>'+(parseInt(goList[j].ech_Cls_Grp)+parseInt(returnList[j].ech_Cls_Grp))/2+'</td><td></td><td></td><td>'+(goList[j].two_Tak_Ppt+returnList[j].two_Tak_Ppt)+'</td><td>'+(goList[j].ful_Pce_Ppt+returnList[j].ful_Pce_Ppt)+'</td><td>'+(goList[j].nne_Dnt_Ppt+returnList[j].nne_Dnt_Ppt)+'</td><td>'+(goList[j].eht_Five_Dnt_Ppt+returnList[j].eht_Five_Dnt_Ppt)+'</td><td>'+(goList[j].eht_Dnt_Ppt+returnList[j].eht_Dnt_Ppt)+'</td><td>'+(goList[j].sen_Five_Dnt_Ppt+returnList[j].sen_Five_Dnt_Ppt)+'</td><td>'+(goList[j].sen_Dnt_Ppt+returnList[j].sen_Dnt_Ppt)+'</td><td>'+(goList[j].six_Dnt_Ppt+returnList[j].six_Dnt_Ppt)+'</td><td>'+(goList[j].fve_Dnt_Ppt+returnList[j].fve_Dnt_Ppt)+'</td><td>'+(goList[j].fur_Fve_Dnt_Ppt+returnList[j].fur_Fve_Dnt_Ppt)+'</td><td>'+(goList[j].fur_Dnt_Ppt+returnList[j].fur_Dnt_Ppt)+'</td><td>'+(goList[j].thr_Dnt_Ppt+returnList[j].thr_Dnt_Ppt)+'</td><td>'+(goList[j].two_Dnt_Ppt+returnList[j].two_Dnt_Ppt)+'</td><td>'+(goList[j].sal_Tak_Ppt+returnList[j].sal_Tak_Ppt)+'</td><td>'+(parseInt(goList[j].pgs_Per_Cls)+parseInt(returnList[j].pgs_Per_Cls))+'</td><td>'+((parseInt(goList[j].pgs_Per_Cls)-parseInt(goList[j].grp_Nbr))+(parseInt(returnList[j].pgs_Per_Cls)-parseInt(returnList[j].grp_Nbr)))+'</td><td>'+(parseFloat(goList[j].totalNumber)-parseFloat(goList[j].grp_Ine)+parseFloat(returnList[j].totalNumber)-parseFloat(returnList[j].grp_Ine)).toFixed(2)+'</td><td>'+(goList[j].grp_Ine+returnList[j].grp_Ine).toFixed(2)+'</td><td>'+((parseFloat(goList[j].totalNumber)+parseFloat(returnList[j].totalNumber))>0?(parseFloat(goList[j].totalNumber)+parseFloat(returnList[j].totalNumber))/(parseInt(goList[j].pgs_Per_Cls)*parseFloat(list[i].yb)+parseInt(returnList[j].pgs_Per_Cls)*parseFloat(list[i].yb)):0).toFixed(2)+'</td><td>'+(goList[j].totalNumber+returnList[j].totalNumber).toFixed(2)+'</td></tr></table>';
											operation +='<tr><td rowspan="2">'+(parseInt(searchJson.lcl_Dpt_Day.substring(5))==1?12:parseInt(searchJson.lcl_Dpt_Day.substring(5))-1)+'月</td><td>'+(i==0?(searchJson.dpt_AirPt_Cd+'-'+searchJson.arrv_Airpt_Cd):(i==1?(searchJson.dpt_AirPt_Cd+'-'+searchJson.pas_stp):(searchJson.pas_stp+'-'+searchJson.arrv_Airpt_Cd)))+'</td><td>'+goList[j].ech_Cls_Grp+'</td><td>'+list[i].yb+'</td><td>'+(parseInt(goList[j].grp_Nbr)==0?0:parseFloat(goList[j].grp_Ine)/parseInt(goList[j].grp_Nbr)).toFixed(2)+'</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>'+goList[j].grp_Nbr.toFixed(0)+'</td><td>'+goList[j].pgs_Per_Cls.toFixed(0)+'</td><td>'+(parseInt(goList[j].pgs_Per_Cls)-parseInt(goList[j].grp_Nbr))+'</td><td>'+(parseFloat(goList[j].totalNumber)-parseFloat(goList[j].grp_Ine)).toFixed(2)+'</td><td>'+goList[j].grp_Ine.toFixed(2)+'</td><td>'+(parseInt(goList[j].pgs_Per_Cls)==0?0:parseFloat(goList[j].totalNumber)/parseInt(goList[j].pgs_Per_Cls)/list[i].yb).toFixed(2)+'</td><td>'+goList[j].totalNumber.toFixed(2)+'</td></tr>';
											operation +='<tr><td>'+(i==0?(searchJson.arrv_Airpt_Cd+'-'+searchJson.dpt_AirPt_Cd):(i==1?(searchJson.pas_stp+'-'+searchJson.dpt_AirPt_Cd):(searchJson.arrv_Airpt_Cd+'-'+searchJson.pas_stp)))+'</td><td>'+returnList[j].ech_Cls_Grp+'</td><td>'+list[i].rYb+'</td><td>'+(parseInt(returnList[j].grp_Nbr)==0?0:parseFloat(returnList[j].grp_Ine)/parseInt(returnList[j].grp_Nbr)).toFixed(2)+'</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>'+returnList[j].grp_Nbr.toFixed(0)+'</td><td>'+returnList[j].pgs_Per_Cls.toFixed(0)+'</td><td>'+(parseInt(returnList[j].pgs_Per_Cls)-parseInt(returnList[j].grp_Nbr))+'</td><td>'+(parseFloat(returnList[j].totalNumber)-parseFloat(returnList[j].grp_Ine)).toFixed(2)+'</td><td>'+returnList[j].grp_Ine.toFixed(2)+'</td><td>'+(parseInt(returnList[j].pgs_Per_Cls)==0?0:parseFloat(returnList[j].totalNumber)/parseInt(returnList[j].pgs_Per_Cls)/list[i].rYb).toFixed(2)+'</td><td>'+returnList[j].totalNumber.toFixed(2)+'</td></tr>';
											operation +='<tr><td colspan="2">合计</td><td>'+(parseInt(goList[j].ech_Cls_Grp)+parseInt(returnList[j].ech_Cls_Grp))/2+'</td><td></td><td></td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>'+(goList[j].grp_Nbr+returnList[j].grp_Nbr).toFixed(0)+'</td><td>'+(goList[j].pgs_Per_Cls+returnList[j].pgs_Per_Cls).toFixed(0)+'</td><td>'+(goList[j].pgs_Per_Cls-goList[j].grp_Nbr+returnList[j].pgs_Per_Cls-returnList[j].grp_Nbr).toFixed(0)+'</td><td>'+(parseFloat(goList[j].totalNumber)-parseFloat(goList[j].grp_Ine)+parseFloat(returnList[j].totalNumber)-parseFloat(returnList[j].grp_Ine)).toFixed(2)+'</td><td>'+(goList[j].grp_Ine+returnList[j].grp_Ine).toFixed(2)+'</td><td>'+((parseFloat(goList[j].totalNumber)+parseFloat(returnList[j].totalNumber))>0?(parseFloat(goList[j].totalNumber)+parseFloat(returnList[j].totalNumber))/(parseInt(goList[j].pgs_Per_Cls)*parseFloat(list[i].yb)+parseInt(returnList[j].pgs_Per_Cls)*parseFloat(list[i].yb)):0).toFixed(2)+'</td><td>'+(goList[j].totalNumber+returnList[j].totalNumber).toFixed(2)+'</td></tr></table>';
										}
									}
									//生成预案表
									var salePlan = list[i].salePlan;
									var rSalePlan = list[i].rSalePlan;
									operation +='<table class="table table-hover table-striped salePlanTable" style="overflow: scroll;"><tr><td colspan="31">'+searchJson.lcl_Dpt_Day.substring(0,4)+'年均班营收预估</td></tr>';
									operation +='<tr><td>航班日期</td><td>航段</td><td>执行班次</td><td>Y舱价格</td><td>团队价格</td><td>F</td><td>Y</td><td>B</td><td>H</td><td>K</td><td>L</td><td>M</td><td>Q</td><td>X</td><td>U</td><td>E</td><td>T</td><td>Z</td><td>特殊</td><td>散团人数/班</td><td>散客/班</td><td>散客收入/班</td><td>团队收入/班</td><td>平均折扣</td><td>散团收入/班</td><td>小时收入</td><td>客座率/班</td><td>补贴/班</td><td>总补贴/月</td>	</tr>';
									operation +='<tr><td colspan="2">折扣</td><td></td><td></td><td></td><td>150%</td><td>100%</td><td>90%</td><td>85%</td><td>80%</td><td>75%</td><td>70%</td><td>60%</td><td>50%</td><td>45%</td><td>40%</td><td>30%</td><td>20%</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td rowspan="4">'+(list[i].totalTime==0?0:((parseFloat(salePlan.allFold)+parseFloat(rSalePlan.allFold))/list[i].totalTime).toFixed(2))+'</td><td rowspan="4">'+(parseInt(salePlan.fITNbr)+parseInt(salePlan.groupNbr)+parseInt(rSalePlan.fITNbr)+parseInt(rSalePlan.groupNbr))/2*(parseInt(list[i].siteCount))+'</td><td rowspan="4">'+(list[i].totalTime*list[i].hourCost-(parseFloat(salePlan.allFold)+parseFloat(rSalePlan.allFold)))+'</td><td rowspan="4">'+(list[i].totalTime*list[i].hourCost-(parseFloat(salePlan.allFold)+parseFloat(rSalePlan.allFold))*((parseInt(salePlan.frequency)+parseInt(rSalePlan.frequency))/2)).toFixed(2)+'</td></tr>';
									operation +='<tr><td rowspan="2">'+parseInt(searchJson.lcl_Dpt_Day.substring(5))+'月</td><td>'+(i==0?(searchJson.dpt_AirPt_Cd+'-'+searchJson.arrv_Airpt_Cd):(i==1?(searchJson.dpt_AirPt_Cd+'-'+searchJson.pas_stp):(searchJson.pas_stp+'-'+searchJson.arrv_Airpt_Cd)))+'</td><td>'+salePlan.frequency+'</td><td>'+list[i].yb+'</td><td>'+(parseInt(salePlan.groupNbr)==0?0:parseFloat(salePlan.discountReturn)/parseInt(salePlan.groupNbr)).toFixed(2)+'</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>'+salePlan.groupNbr+'</td><td>'+(parseInt(salePlan.fITNbr)+parseInt(salePlan.groupNbr))+'</td><td>'+salePlan.fITNbr+'</td><td>'+(parseFloat(salePlan.allFold)-parseFloat(salePlan.discountReturn)).toFixed(2)+'</td><td>'+salePlan.discountReturn+'</td><td>'+(((parseInt(salePlan.groupNbr)+parseInt(salePlan.fITNbr))==0||parseFloat(list[i].yb)==0)?0:parseFloat(salePlan.allFold)/(parseInt(salePlan.groupNbr)+parseInt(salePlan.fITNbr))/parseFloat(list[i].yb)).toFixed(2)+'</td><td>'+salePlan.allFold.toFixed(2)+'</td></tr>';
									operation +='<tr><td>'+(i==0?(searchJson.arrv_Airpt_Cd+'-'+searchJson.dpt_AirPt_Cd):(i==1?(searchJson.pas_stp+'-'+searchJson.dpt_AirPt_Cd):(searchJson.arrv_Airpt_Cd+'-'+searchJson.pas_stp)))+'</td><td>'+rSalePlan.frequency+'</td><td>'+list[i].rYb+'</td><td>'+(parseInt(rSalePlan.groupNbr)==0?0:parseFloat(rSalePlan.discountReturn)/parseInt(rSalePlan.groupNbr)).toFixed(2)+'</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>'+rSalePlan.groupNbr+'</td><td>'+(parseInt(rSalePlan.fITNbr)+parseInt(rSalePlan.groupNbr))+'</td><td>'+rSalePlan.fITNbr+'</td><td>'+(parseFloat(rSalePlan.allFold)-parseFloat(rSalePlan.discountReturn)).toFixed(2)+'</td><td>'+rSalePlan.discountReturn+'</td><td>'+(((parseInt(rSalePlan.groupNbr)+parseInt(rSalePlan.fITNbr))==0||(parseFloat(list[i].yb)==0))?0:parseFloat(rSalePlan.allFold)/(parseInt(rSalePlan.groupNbr)+parseInt(rSalePlan.fITNbr))/parseFloat(list[i].yb)).toFixed(2)+'</td><td>'+rSalePlan.allFold.toFixed(2)+'</td></tr>';
									operation +='<tr><td colspan="2">合计</td><td>'+(parseInt(salePlan.frequency)+parseInt(rSalePlan.frequency))/2+'</td><td></td><td></td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>'+(salePlan.groupNbr+rSalePlan.groupNbr)+'</td><td>'+(parseInt(salePlan.fITNbr)+parseInt(salePlan.groupNbr)+parseInt(rSalePlan.fITNbr)+parseInt(rSalePlan.groupNbr))+'</td><td>'+(parseInt(salePlan.fITNbr)+parseInt(rSalePlan.fITNbr))+'</td><td>'+((parseFloat(rSalePlan.allFold)-parseFloat(rSalePlan.discountReturn))+(parseFloat(salePlan.allFold)-parseFloat(salePlan.discountReturn))).toFixed(2)+'</td><td>'+(parseFloat(salePlan.discountReturn)+parseFloat(rSalePlan.discountReturn)).toFixed(2)+'</td><td>'+((parseFloat(salePlan.allFold)+parseFloat(rSalePlan.allFold))>0?(parseFloat(salePlan.allFold)+parseFloat(rSalePlan.allFold))/((parseInt(salePlan.fITNbr)+parseInt(salePlan.groupNbr)+parseInt(rSalePlan.fITNbr)+parseInt(rSalePlan.groupNbr))*parseFloat(list[i].yb)):0).toFixed(2)+'</td><td>'+(parseFloat(salePlan.allFold)+parseFloat(rSalePlan.allFold)).toFixed(2)+'</td></tr></table>';
									//生成舱位设定表
									operation +='<table class="table table-hover table-striped salePlanTable" style="overflow: scroll;"><tr><td colspan="31">'+searchJson.lcl_Dpt_Day.substring(0,4)+'年达到预估舱位设置</td></tr>';
									operation +='<tr><td>航班日期</td><td>航段</td><td>执行班次</td><td>Y舱价格</td><td>团队价格</td><td>F</td><td>Y</td><td>B</td><td>H</td><td>K</td><td>L</td><td>M</td><td>Q</td><td>X</td><td>U</td><td>E</td><td>T</td><td>Z</td><td>特殊</td><td>散团人数/班</td><td>散客/班</td><td>散客收入/班</td><td>团队收入/班</td><td>平均折扣</td><td>散团收入/班</td><td>小时收入</td><td>客座率/班</td></tr>';
									operation +='<tr><td colspan="2">折扣</td><td></td><td></td><td></td><td>150%</td><td>100%</td><td>90%</td><td>85%</td><td>80%</td><td>75%</td><td>70%</td><td>60%</td><td>50%</td><td>45%</td><td>40%</td><td>30%</td><td>20%</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td rowspan="4"><input id="hourIncome'+(i+1)+'" readonly="readonly" value="';
									var cabinSeatSet = list[i].cabinSeatSet;
									var rCabinSeatSet = list[i].rCabinSeatSet;
									if(cabinSeatSet!=null&&rCabinSeatSet!=null){
										operation +=(list[i].totalTime==0?0:(((parseInt(cabinSeatSet.two_Tak_Ppt)*1.5+parseInt(cabinSeatSet.ful_Pce_Ppt)*1+parseInt(cabinSeatSet.nne_Dnt_Ppt)*0.9+parseInt(cabinSeatSet.eht_Five_Dnt_Ppt)*0.85+parseInt(cabinSeatSet.eht_Dnt_Ppt)*0.8+parseInt(cabinSeatSet.sen_Five_Dnt_Ppt)*0.75+parseInt(cabinSeatSet.sen_Dnt_Ppt)*0.7+parseInt(cabinSeatSet.six_Dnt_Ppt)*0.6+parseInt(cabinSeatSet.fve_Dnt_Ppt)*0.5+parseInt(cabinSeatSet.fur_Fve_Dnt_Ppt)*0.45+parseInt(cabinSeatSet.fur_Dnt_Ppt)*0.4+parseInt(cabinSeatSet.thr_Dnt_Ppt)*0.3+parseInt(cabinSeatSet.two_Dnt_Ppt)*0.2)*list[i].yb+(parseInt(rCabinSeatSet.two_Tak_Ppt)*1.5+parseInt(rCabinSeatSet.ful_Pce_Ppt)*1+parseInt(rCabinSeatSet.nne_Dnt_Ppt)*0.9+parseInt(rCabinSeatSet.eht_Five_Dnt_Ppt)*0.85+parseInt(rCabinSeatSet.eht_Dnt_Ppt)*0.8+parseInt(rCabinSeatSet.sen_Five_Dnt_Ppt)*0.75+parseInt(rCabinSeatSet.sen_Dnt_Ppt)*0.7+parseInt(rCabinSeatSet.six_Dnt_Ppt)*0.6+parseInt(rCabinSeatSet.fve_Dnt_Ppt)*0.5+parseInt(rCabinSeatSet.fur_Fve_Dnt_Ppt)*0.45+parseInt(rCabinSeatSet.fur_Dnt_Ppt)*0.4+parseInt(rCabinSeatSet.thr_Dnt_Ppt)*0.3+parseInt(rCabinSeatSet.two_Dnt_Ppt)*0.2)*list[i].yb+(parseInt(rSalePlan.groupNbr)==0?0:parseFloat(rSalePlan.discountReturn).toFixed(2)/parseInt(rSalePlan.groupNbr)).toFixed(2)*rCabinSeatSet.grp_Nbr+(parseInt(salePlan.groupNbr)==0?0:parseFloat(salePlan.discountReturn)/parseInt(salePlan.groupNbr)).toFixed(2)*cabinSeatSet.grp_Nbr)/list[i].totalTime).toFixed(2))+'"/></td><td rowspan="4"><input readonly="readonly" id="plf'+(i+1)+'" value="';
										operation +=(list[i].siteCount==0?0:(((parseInt(cabinSeatSet.two_Tak_Ppt)+parseInt(cabinSeatSet.ful_Pce_Ppt)+parseInt(cabinSeatSet.nne_Dnt_Ppt)+parseInt(cabinSeatSet.eht_Five_Dnt_Ppt)+parseInt(cabinSeatSet.eht_Dnt_Ppt)+parseInt(cabinSeatSet.sen_Five_Dnt_Ppt)+parseInt(cabinSeatSet.sen_Dnt_Ppt)+parseInt(cabinSeatSet.six_Dnt_Ppt)+parseInt(cabinSeatSet.fve_Dnt_Ppt)+parseInt(cabinSeatSet.fur_Fve_Dnt_Ppt)+parseInt(cabinSeatSet.fur_Dnt_Ppt)+parseInt(cabinSeatSet.thr_Dnt_Ppt)+parseInt(cabinSeatSet.two_Dnt_Ppt)+parseInt(cabinSeatSet.grp_Nbr)+parseInt(rCabinSeatSet.two_Tak_Ppt)+parseInt(rCabinSeatSet.ful_Pce_Ppt)+parseInt(rCabinSeatSet.nne_Dnt_Ppt)+parseInt(rCabinSeatSet.eht_Five_Dnt_Ppt)+parseInt(rCabinSeatSet.eht_Dnt_Ppt)+parseInt(rCabinSeatSet.sen_Five_Dnt_Ppt)+parseInt(rCabinSeatSet.sen_Dnt_Ppt)+parseInt(rCabinSeatSet.six_Dnt_Ppt)+parseInt(rCabinSeatSet.fve_Dnt_Ppt)+parseInt(rCabinSeatSet.fur_Fve_Dnt_Ppt)+parseInt(rCabinSeatSet.fur_Dnt_Ppt)+parseInt(rCabinSeatSet.thr_Dnt_Ppt)+parseInt(rCabinSeatSet.two_Dnt_Ppt)+parseInt(rCabinSeatSet.grp_Nbr))/(2*list[i].siteCount))*100).toFixed(2))+'"/></td></tr>';
									}else{
										operation +='"/></td><td rowspan="4"><input readonly="readonly" id="plf'+(i+1)+'" value=""/></td></tr>';
									}
									if(cabinSeatSet!=null){
										operation +='<tr class="eventDone" value="'+(i+1)+'"><input type="hidden" name="id" value="'+cabinSeatSet.id+'"/><td rowspan="2">'+(parseInt(searchJson.lcl_Dpt_Day.substring(5)))+'月</td><td>'+(i==0?(searchJson.dpt_AirPt_Cd+'-'+searchJson.arrv_Airpt_Cd):(i==1?(searchJson.dpt_AirPt_Cd+'-'+searchJson.pas_stp):(searchJson.pas_stp+'-'+searchJson.arrv_Airpt_Cd)))+'</td><td>'+salePlan.frequency+'</td><td>'+list[i].yb+'</td><td><input name="grp_Prc" id="grp_Prc'+(i+1)+'" value="'+(parseInt(salePlan.groupNbr)==0?0:parseFloat(salePlan.discountReturn)/parseInt(salePlan.groupNbr)).toFixed(2)+'"/></td><td><input name="two_Tak_Ppt" id="two_Tak_Ppt'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input name="ful_Pce_Ppt" id="ful_Pce_Ppt'+(i+1)+'" value="'+cabinSeatSet.ful_Pce_Ppt+'"/></td><td><input name="nne_Dnt_Ppt" id="nne_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.nne_Dnt_Ppt+'"/></td><td><input name="eht_Five_Dnt_Ppt" id="eht_Five_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.eht_Five_Dnt_Ppt+'"/></td><td><input name="eht_Dnt_Ppt" id="eht_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.eht_Dnt_Ppt+'"/></td><td><input name="sen_Five_Dnt_Ppt" id="sen_Five_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.sen_Five_Dnt_Ppt+'"/></td><td><input name="sen_Dnt_Ppt" id="sen_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.sen_Dnt_Ppt+'"/></td><td><input name="six_Dnt_Ppt" id="six_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.six_Dnt_Ppt+'"/></td><td><input name="fve_Dnt_Ppt" id="fve_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.fve_Dnt_Ppt+'"/></td><td><input name="fur_Fve_Dnt_Ppt" id="fur_Fve_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.fur_Fve_Dnt_Ppt+'"/></td><td><input name="fur_Dnt_Ppt" id="fur_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.fur_Dnt_Ppt+'"/></td><td><input name="thr_Dnt_Ppt" id="thr_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.thr_Dnt_Ppt+'"/></td><td><input name="two_Dnt_Ppt" id="two_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.two_Dnt_Ppt+'"/></td><td><input name="grp_Nbr" id="grp_Nbr'+(i+1)+'" value="'+cabinSeatSet.grp_Nbr+'"/></td><td><input id="pgs_Per_Cls'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input id="fit'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input id="fit_Income'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input id="grp_Ine'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input id="avg_Dis'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input id="totalNumber'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td></tr>';
									}else{
										operation +='<tr class="eventDone" value="'+(i+1)+'"><td rowspan="2">'+(parseInt(searchJson.lcl_Dpt_Day.substring(5)))+'月</td><td>'+(i==0?(searchJson.dpt_AirPt_Cd+'-'+searchJson.arrv_Airpt_Cd):(i==1?(searchJson.dpt_AirPt_Cd+'-'+searchJson.pas_stp):(searchJson.pas_stp+'-'+searchJson.arrv_Airpt_Cd)))+'</td><td>'+salePlan.frequency+'</td><td>'+list[i].yb+'</td><td><input name="grp_Prc" id="grp_Prc'+(i+1)+'" value="'+(parseInt(salePlan.groupNbr)==0?0:parseFloat(salePlan.discountReturn)/parseInt(salePlan.groupNbr)).toFixed(2)+'"/></td><td><input name="two_Tak_Ppt" id="two_Tak_Ppt'+(i+1)+'"/></td><td><input name="ful_Pce_Ppt" id="ful_Pce_Ppt'+(i+1)+'"/></td><td><input name="nne_Dnt_Ppt" id="nne_Dnt_Ppt'+(i+1)+'"/></td><td><input name="eht_Five_Dnt_Ppt" id="eht_Five_Dnt_Ppt'+(i+1)+'"/></td><td><input name="eht_Dnt_Ppt" id="eht_Dnt_Ppt'+(i+1)+'"/></td><td><input name="sen_Five_Dnt_Ppt" id="sen_Five_Dnt_Ppt'+(i+1)+'"/></td><td><input name="sen_Dnt_Ppt" id="sen_Dnt_Ppt'+(i+1)+'"/></td><td><input name="six_Dnt_Ppt" id="six_Dnt_Ppt'+(i+1)+'"/></td><td><input name="fve_Dnt_Ppt" id="fve_Dnt_Ppt'+(i+1)+'"/></td><td><input name="fur_Fve_Dnt_Ppt" id="fur_Fve_Dnt_Ppt'+(i+1)+'"/></td><td><input name="fur_Dnt_Ppt" id="fur_Dnt_Ppt'+(i+1)+'"/></td><td><input name="thr_Dnt_Ppt" id="thr_Dnt_Ppt'+(i+1)+'"/></td><td><input name="two_Dnt_Ppt" id="two_Dnt_Ppt'+(i+1)+'"/></td><td><input name="grp_Nbr" id="grp_Nbr'+(i+1)+'"/></td><td><input id="pgs_Per_Cls'+(i+1)+'"/></td><td><input id="fit'+(i+1)+'"/></td><td><input id="fit_Income'+(i+1)+'"/></td><td><input id="grp_Ine'+(i+1)+'"/></td><td><input id="avg_Dis'+(i+1)+'"/></td><td><input id="totalNumber'+(i+1)+'"/></td></tr>';
									}
									if(rCabinSeatSet!=null){
										operation +='<tr class="eventDone" value="'+(i+1)+'"><input type="hidden" name="id" value="'+rCabinSeatSet.id+'"/><td>'+(i==0?(searchJson.arrv_Airpt_Cd+'-'+searchJson.dpt_AirPt_Cd):(i==1?(searchJson.pas_stp+'-'+searchJson.dpt_AirPt_Cd):(searchJson.arrv_Airpt_Cd+'-'+searchJson.pas_stp)))+'</td><td>'+rSalePlan.frequency+'</td><td>'+list[i].rYb+'</td><td><input name="grp_Prc" id="rGrp_Prc'+(i+1)+'" value="'+(parseInt(rSalePlan.groupNbr)==0?0:parseFloat(rSalePlan.discountReturn).toFixed(2)/parseInt(rSalePlan.groupNbr)).toFixed(2)+'"/></td><td><input name="two_Tak_Ppt" id="rTwo_Tak_Ppt'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input name="ful_Pce_Ppt" id="rFul_Pce_Ppt'+(i+1)+'" value="'+rCabinSeatSet.ful_Pce_Ppt+'"/></td><td><input name="nne_Dnt_Ppt" id="rNne_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.nne_Dnt_Ppt+'"/></td><td><input name="eht_Five_Dnt_Ppt" id="rEht_Five_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.eht_Five_Dnt_Ppt+'"/></td><td><input name="eht_Dnt_Ppt" id="rEht_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.eht_Dnt_Ppt+'"/></td><td><input name="sen_Five_Dnt_Ppt" id="rSen_Five_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.sen_Five_Dnt_Ppt+'"/></td><td><input name="sen_Dnt_Ppt" id="rSen_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.sen_Dnt_Ppt+'"/></td><td><input name="six_Dnt_Ppt" id="rSix_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.six_Dnt_Ppt+'"/></td><td><input name="fve_Dnt_Ppt" id="rFve_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.fve_Dnt_Ppt+'"/></td><td><input name="fur_Fve_Dnt_Ppt" id="rFur_Fve_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input name="fur_Dnt_Ppt" id="rFur_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.fur_Dnt_Ppt+'"/></td><td><input name="thr_Dnt_Ppt" id="rThr_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.thr_Dnt_Ppt+'"/></td><td><input name="two_Dnt_Ppt" id="rTwo_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.two_Dnt_Ppt+'"/></td><td><input name="grp_Nbr" id="rGrp_Nbr'+(i+1)+'" value="'+rCabinSeatSet.grp_Nbr+'" onblur="setCabinSeatSetParam('+(i+1)+','+list[i].yb+','+list[i].rYb+')"/></td><td><input id="rPgs_Per_Cls'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input id="rFit'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input id="rFit_Income'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input id="rGrp_Ine'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input id="rAvg_Dis'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input id="rTotalNumber'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td></tr>';
									}else{
										operation +='<tr class="eventDone" value="'+(i+1)+'"><td>'+(i==0?(searchJson.arrv_Airpt_Cd+'-'+searchJson.dpt_AirPt_Cd):(i==1?(searchJson.pas_stp+'-'+searchJson.dpt_AirPt_Cd):(searchJson.arrv_Airpt_Cd+'-'+searchJson.pas_stp)))+'</td><td>'+rSalePlan.frequency+'</td><td>'+list[i].rYb+'</td><td><input name="grp_Prc" id="rGrp_Prc'+(i+1)+'" value="'+(parseInt(rSalePlan.groupNbr)==0?0:parseFloat(rSalePlan.discountReturn).toFixed(2)/parseInt(rSalePlan.groupNbr)).toFixed(2)+'"/></td><td><input name="two_Tak_Ppt" id="rTwo_Tak_Ppt'+(i+1)+'"/></td><td><input name="ful_Pce_Ppt" id="rFul_Pce_Ppt'+(i+1)+'"/></td><td><input name="nne_Dnt_Ppt" id="rNne_Dnt_Ppt'+(i+1)+'"/></td><td><input name="eht_Five_Dnt_Ppt" id="rEht_Five_Dnt_Ppt'+(i+1)+'"/></td><td><input name="eht_Dnt_Ppt" id="rEht_Dnt_Ppt'+(i+1)+'"/></td><td><input name="sen_Five_Dnt_Ppt" id="rSen_Five_Dnt_Ppt'+(i+1)+'"/></td><td><input name="sen_Dnt_Ppt" id="rSen_Dnt_Ppt'+(i+1)+'"/></td><td><input name="six_Dnt_Ppt" id="rSix_Dnt_Ppt'+(i+1)+'"/></td><td><input name="fve_Dnt_Ppt" id="rFve_Dnt_Ppt'+(i+1)+'"/></td><td><input name="fur_Fve_Dnt_Ppt" id="rFur_Fve_Dnt_Ppt'+(i+1)+'"/></td><td><input name="fur_Dnt_Ppt" id="rFur_Dnt_Ppt'+(i+1)+'"/></td><td><input name="thr_Dnt_Ppt" id="rThr_Dnt_Ppt'+(i+1)+'"/></td><td><input name="two_Dnt_Ppt" id="rTwo_Dnt_Ppt'+(i+1)+'"/></td><td><input name="grp_Nbr" id="rGrp_Nbr'+(i+1)+'" onblur="setCabinSeatSetParam('+(i+1)+','+list[i].yb+','+list[i].rYb+')"/></td><td><input id="rPgs_Per_Cls'+(i+1)+'"/></td><td><input id="rFit'+(i+1)+'"/></td><td><input id="rFit_Income'+(i+1)+'"/></td><td><input id="rGrp_Ine'+(i+1)+'"/></td><td><input id="rAvg_Dis'+(i+1)+'"/></td><td><input id="rTotalNumber'+(i+1)+'"/></td></tr>';
									}
									if(cabinSeatSet!=null&&rCabinSeatSet!=null){
										operation +='<tr><td colspan="2">合计</td><td>'+(parseInt(salePlan.frequency)+parseInt(rSalePlan.frequency))/2+'</td><td></td><td></td><td><input readonly="readonly" id="sum_Two_Tak_Ppt'+(i+1)+'" value="'+(parseInt(cabinSeatSet.two_Tak_Ppt)+parseInt(rCabinSeatSet.two_Tak_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Ful_Pce_Ppt'+(i+1)+'" value="'+(parseInt(cabinSeatSet.ful_Pce_Ppt)+parseInt(rCabinSeatSet.ful_Pce_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Nne_Dnt_Ppt'+(i+1)+'" value="'+(parseInt(cabinSeatSet.nne_Dnt_Ppt)+parseInt(rCabinSeatSet.nne_Dnt_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Eht_Five_Dnt_Ppt'+(i+1)+'" value="'+(parseInt(cabinSeatSet.eht_Five_Dnt_Ppt)+parseInt(rCabinSeatSet.eht_Five_Dnt_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Eht_Dnt_Ppt'+(i+1)+'" value="'+(parseInt(cabinSeatSet.eht_Dnt_Ppt)+parseInt(rCabinSeatSet.eht_Dnt_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Sen_Five_Dnt_Ppt'+(i+1)+'" value="'+(parseInt(cabinSeatSet.sen_Five_Dnt_Ppt)+parseInt(rCabinSeatSet.sen_Five_Dnt_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Sen_Dnt_Ppt'+(i+1)+'" value="'+(parseInt(cabinSeatSet.sen_Dnt_Ppt)+parseInt(rCabinSeatSet.sen_Dnt_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Six_Dnt_Ppt'+(i+1)+'" value="'+(parseInt(cabinSeatSet.six_Dnt_Ppt)+parseInt(rCabinSeatSet.six_Dnt_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Fve_Dnt_Ppt'+(i+1)+'" value="'+(parseInt(cabinSeatSet.fve_Dnt_Ppt)+parseInt(rCabinSeatSet.fve_Dnt_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Fur_Fve_Dnt_Ppt'+(i+1)+'" value="'+(parseInt(cabinSeatSet.fur_Fve_Dnt_Ppt)+parseInt(rCabinSeatSet.fur_Fve_Dnt_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Fur_Dnt_Ppt'+(i+1)+'" value="'+(parseInt(cabinSeatSet.fur_Dnt_Ppt)+parseInt(rCabinSeatSet.fur_Dnt_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Thr_Dnt_Ppt'+(i+1)+'" value="'+(parseInt(cabinSeatSet.thr_Dnt_Ppt)+parseInt(rCabinSeatSet.thr_Dnt_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Two_Dnt_Ppt'+(i+1)+'" value="'+(parseInt(cabinSeatSet.two_Dnt_Ppt)+parseInt(rCabinSeatSet.two_Dnt_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Grp_Nbr'+(i+1)+'" value="'+(parseInt(cabinSeatSet.two_Tak_Ppt)+parseInt(rCabinSeatSet.two_Tak_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Pgs_Per_Cls'+(i+1)+'" value="'+(parseInt(cabinSeatSet.two_Tak_Ppt)+parseInt(rCabinSeatSet.two_Tak_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Fit'+(i+1)+'" value="'+(parseInt(cabinSeatSet.two_Tak_Ppt)+parseInt(rCabinSeatSet.two_Tak_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Fit_Income'+(i+1)+'" value="'+(parseInt(cabinSeatSet.two_Tak_Ppt)+parseInt(rCabinSeatSet.two_Tak_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Grp_Ine'+(i+1)+'" value="'+(parseInt(cabinSeatSet.two_Tak_Ppt)+parseInt(rCabinSeatSet.two_Tak_Ppt))+'"/></td><td><input readonly="readonly" id="sum_Avg_Dis'+(i+1)+'" value="'+(parseInt(cabinSeatSet.two_Tak_Ppt)+parseInt(rCabinSeatSet.two_Tak_Ppt)).toFixed(2)+'"/></td><td><input readonly="readonly" id="sum_TotalNumber'+(i+1)+'" value="'+(parseInt(cabinSeatSet.two_Tak_Ppt)+parseInt(rCabinSeatSet.two_Tak_Ppt))+'"/></td></tr></table>';
									}else if(cabinSeatSet==null&&rCabinSeatSet!=null){
										operation +='<tr><td colspan="2">合计</td><td>'+(parseInt(salePlan.frequency)+parseInt(rSalePlan.frequency))/2+'</td><td></td><td></td><td><input readonly="readonly" id="sum_Two_Tak_Ppt'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Ful_Pce_Ppt'+(i+1)+'" value="'+rCabinSeatSet.ful_Pce_Ppt+'"/></td><td><input readonly="readonly" id="sum_Nne_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.nne_Dnt_Ppt+'"/></td><td><input readonly="readonly" id="sum_Eht_Five_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Eht_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Sen_Five_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Sen_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Six_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Fve_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Fur_Fve_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Fur_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Thr_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Two_Dnt_Ppt'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Grp_Nbr'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Pgs_Per_Cls'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Fit'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Fit_Income'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Grp_Ine'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Avg_Dis'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_TotalNumber'+(i+1)+'" value="'+rCabinSeatSet.two_Tak_Ppt+'"/></td></tr></table>';
									}else if(rCabinSeatSet==null&&cabinSeatSet!=null){
										operation +='<tr><td colspan="2">合计</td><td>'+(parseInt(salePlan.frequency)+parseInt(rSalePlan.frequency))/2+'</td><td></td><td></td><td><input readonly="readonly" id="sum_Two_Tak_Ppt'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Ful_Pce_Ppt'+(i+1)+'" value="'+cabinSeatSet.ful_Pce_Ppt+'"/></td><td><input readonly="readonly" id="sum_Nne_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.nne_Dnt_Ppt+'"/></td><td><input readonly="readonly" id="sum_Eht_Five_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Eht_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Sen_Five_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Sen_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Six_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Fve_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Fur_Fve_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Fur_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Thr_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Two_Dnt_Ppt'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Grp_Nbr'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Pgs_Per_Cls'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Fit'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Fit_Income'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Grp_Ine'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_Avg_Dis'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td><td><input readonly="readonly" id="sum_TotalNumber'+(i+1)+'" value="'+cabinSeatSet.two_Tak_Ppt+'"/></td></tr></table>';
									}else{
										operation +='<tr><td colspan="2">合计</td><td>'+(parseInt(salePlan.frequency)+parseInt(rSalePlan.frequency))/2+'</td><td></td><td></td><td><input readonly="readonly" id="sum_Two_Tak_Ppt'+(i+1)+'"/></td><td><input readonly="readonly" id="sum_Ful_Pce_Ppt'+(i+1)+'"</td><td><input readonly="readonly" id="sum_Nne_Dnt_Ppt'+(i+1)+'"</td><td><input readonly="readonly" id="sum_Eht_Five_Dnt_Ppt'+(i+1)+'"/></td><td><input readonly="readonly" id="sum_Eht_Dnt_Ppt'+(i+1)+'"</td><td><input readonly="readonly" id="sum_Sen_Five_Dnt_Ppt'+(i+1)+'"</td><td><input readonly="readonly" id="sum_Sen_Dnt_Ppt'+(i+1)+'"/></td><td><input readonly="readonly" id="sum_Six_Dnt_Ppt'+(i+1)+'"/></td><td><input readonly="readonly" id="sum_Fve_Dnt_Ppt'+(i+1)+'"/></td><td><input readonly="readonly" id="sum_Fur_Fve_Dnt_Ppt'+(i+1)+'"/></td><td><input readonly="readonly" id="sum_Fur_Dnt_Ppt'+(i+1)+'"/></td><td><input readonly="readonly" id="sum_Thr_Dnt_Ppt'+(i+1)+'"/></td><td><input readonly="readonly" id="sum_Two_Dnt_Ppt'+(i+1)+'"/></td><td><input readonly="readonly" id="sum_Grp_Nbr'+(i+1)+'"/></td><td><input readonly="readonly" id="sum_Pgs_Per_Cls'+(i+1)+'"/></td><td><input readonly="readonly" id="sum_Fit'+(i+1)+'"/></td><td><input readonly="readonly" id="sum_Fit_Income'+(i+1)+'"/></td><td><input readonly="readonly" id="sum_Grp_Ine'+(i+1)+'"/></td><td><input readonly="readonly" id="sum_Avg_Dis'+(i+1)+'"/></td><td><input readonly="readonly" id="sum_TotalNumber'+(i+1)+'"/></td></tr></table>';
									}
									//添加保存按钮
									operation += '<div style="height:30px;text-align:center;margin:10px auto; width:200px;"><a class="btn btn-success" onclick="saveCabinSeatSetData(\''+("form"+(i+1))+'\')">保存</a><a class="btn btn-success" style="margin-left:30px;" onclick="deleteCabinSeatSetData('+list[i].seasonId+')">删除</a></div>';
									operation += '</form>';
									$("#positionsset").append(operation);
								}
							}
						}
						$(document).on('change','.eventDone td input',function(){
							var _index = $(this).parent().parent().attr("value");
							var yb = $('#yb'+_index).val();
							alert(yb);
							setCabinSeatSetParam(_index,yb,yb);
						});
					}else{
						alert("没有可以展示的数据");
					}
				}else{
					alert(data.message);
				}
			}else{
				alert('服务器繁忙，请稍后再操作。');
			}
		}
	});
}
function saveCabinSeatSetData(id){
	//$("#"+id).submit();
	$.ajax({
		url:'${pageContext.request.contextPath}/saveCabinSeatSetData',
		data:$('#'+id).serialize(),
		type:'post',
		success:function(data){
			if(data!=null){
				alert(data.result);
				if(data.opResult=='0'){
					$('#'+id).hide();
				}
			}else{
				alert('There has something wrong in backgroud system.');
			}
		}
	});
	
}
function setCabinSeatSetParam(_index,yb,rYb){
	var grp_Prc = $('#grp_Prc'+_index).val()==""?0:(parseFloat($('#grp_Prc'+_index).val())).toFixed(2);
	var two_Tak_Ppt = $("#two_Tak_Ppt"+_index).val()==""?0:parseInt($("#two_Tak_Ppt"+_index).val());
	var ful_Pce_Ppt = $("#ful_Pce_Ppt"+_index).val()==""?0:parseInt($("#ful_Pce_Ppt"+_index).val());
	var nne_Dnt_Ppt = $("#nne_Dnt_Ppt"+_index).val()==""?0:parseInt($("#nne_Dnt_Ppt"+_index).val());
	var eht_Five_Dnt_Ppt = $("#eht_Five_Dnt_Ppt"+_index).val()==""?0:parseInt($("#eht_Five_Dnt_Ppt"+_index).val());
	var eht_Dnt_Ppt = $('#eht_Dnt_Ppt'+_index).val()==""?0:parseInt($('#eht_Dnt_Ppt'+_index).val());
	var sen_Five_Dnt_Ppt = $("#sen_Five_Dnt_Ppt"+_index).val()==""?0:parseInt($("#sen_Five_Dnt_Ppt"+_index).val());
	var sen_Dnt_Ppt = $("#sen_Dnt_Ppt"+_index).val()==""?0:parseInt($("#sen_Dnt_Ppt"+_index).val());
	var six_Dnt_Ppt = $("#six_Dnt_Ppt"+_index).val()==""?0:parseInt($("#six_Dnt_Ppt"+_index).val());
	var fve_Dnt_Ppt = $("#fve_Dnt_Ppt"+_index).val()==""?0:parseInt($("#fve_Dnt_Ppt"+_index).val());
	var fur_Fve_Dnt_Ppt = $("#fur_Fve_Dnt_Ppt"+_index).val()==""?0:parseInt($("#fur_Fve_Dnt_Ppt"+_index).val());
	var fur_Dnt_Ppt = $("#fur_Dnt_Ppt"+_index).val()==""?0:parseInt($("#fur_Dnt_Ppt"+_index).val());
	var thr_Dnt_Ppt = $("#thr_Dnt_Ppt"+_index).val()==""?0:parseInt($("#thr_Dnt_Ppt"+_index).val());
	var two_Dnt_Ppt = $("#two_Dnt_Ppt"+_index).val()==""?0:parseInt($("#two_Dnt_Ppt"+_index).val());
	var grp_Nbr = $("#grp_Nbr"+_index).val()==""?0:parseInt($("#grp_Nbr"+_index).val());
	var rGrp_Prc = $('#rGrp_Prc'+_index).val()==""?0:(parseFloat($('#rGrp_Prc'+_index).val())).toFixed(2);
	var rTwo_Tak_Ppt = $("#rTwo_Tak_Ppt"+_index).val()==""?0:parseInt($("#rTwo_Tak_Ppt"+_index).val());
	var rFul_Pce_Ppt = $("#rFul_Pce_Ppt"+_index).val()==""?0:parseInt($("#rFul_Pce_Ppt"+_index).val());
	var rNne_Dnt_Ppt = $("#rNne_Dnt_Ppt"+_index).val()==""?0:parseInt($("#rNne_Dnt_Ppt"+_index).val());
	var rEht_Five_Dnt_Ppt = $("#rEht_Five_Dnt_Ppt"+_index).val()==""?0:parseInt($("#rEht_Five_Dnt_Ppt"+_index).val());
	var rEht_Dnt_Ppt = $('#rEht_Dnt_Ppt'+_index).val()==""?0:parseInt($('#rEht_Dnt_Ppt'+_index).val());
	var rSen_Five_Dnt_Ppt = $("#rSen_Five_Dnt_Ppt"+_index).val()==""?0:parseInt($("#rSen_Five_Dnt_Ppt"+_index).val());
	var rSen_Dnt_Ppt = $("#rSen_Dnt_Ppt"+_index).val()==""?0:parseInt($("#rSen_Dnt_Ppt"+_index).val());
	var rSix_Dnt_Ppt = $("#rSix_Dnt_Ppt"+_index).val()==""?0:parseInt($("#rSix_Dnt_Ppt"+_index).val());
	var rFve_Dnt_Ppt = $("#rFve_Dnt_Ppt"+_index).val()==""?0:parseInt($("#rFve_Dnt_Ppt"+_index).val());
	var rFur_Fve_Dnt_Ppt = $("#rFur_Fve_Dnt_Ppt"+_index).val()==""?0:parseInt($("#rFur_Fve_Dnt_Ppt"+_index).val());
	var rFur_Dnt_Ppt = $("#rFur_Dnt_Ppt"+_index).val()==""?0:parseInt($("#rFur_Dnt_Ppt"+_index).val());
	var rThr_Dnt_Ppt = $("#rThr_Dnt_Ppt"+_index).val()==""?0:parseInt($("#rThr_Dnt_Ppt"+_index).val());
	var rTwo_Dnt_Ppt = $("#rTwo_Dnt_Ppt"+_index).val()==""?0:parseInt($("#rTwo_Dnt_Ppt"+_index).val());
	var rGrp_Nbr = $("#rGrp_Nbr"+_index).val()==""?0:parseInt($("#rGrp_Nbr"+_index).val());
	var totalTime = $('#totalTime'+_index).val()==""?0:parseFloat($('#totalTime'+_index).val()).toFixed(1);
	var siteCount = $('#siteCount'+_index).val()==""?0:parseInt($('#siteCount'+_index).val());
	$("#sum_Two_Tak_Ppt"+_index).val(two_Tak_Ppt+rTwo_Tak_Ppt);
	$('#sum_Ful_Pce_Ppt'+_index).val(ful_Pce_Ppt+rFul_Pce_Ppt);
	$("#sum_Nne_Dnt_Ppt"+_index).val(nne_Dnt_Ppt+rNne_Dnt_Ppt);
	$("#sum_Eht_Five_Dnt_Ppt"+_index).val(eht_Five_Dnt_Ppt+rEht_Five_Dnt_Ppt);
	$("#sum_Eht_Dnt_Ppt"+_index).val(eht_Dnt_Ppt+rEht_Dnt_Ppt);
	$("#sum_Sen_Five_Dnt_Ppt"+_index).val(sen_Five_Dnt_Ppt+rSen_Five_Dnt_Ppt);
	$('#sum_Sen_Dnt_Ppt'+_index).val(sen_Dnt_Ppt+rSen_Dnt_Ppt);
	$("#sum_Six_Dnt_Ppt"+_index).val(six_Dnt_Ppt+rSix_Dnt_Ppt);
	$("#sum_Fve_Dnt_Ppt"+_index).val(fve_Dnt_Ppt+rFve_Dnt_Ppt);
	$("#sum_Fur_Fve_Dnt_Ppt"+_index).val(fur_Fve_Dnt_Ppt+rFur_Fve_Dnt_Ppt);
	$("#sum_Fur_Dnt_Ppt"+_index).val(fur_Dnt_Ppt+rFur_Dnt_Ppt);
	$("#sum_Thr_Dnt_Ppt"+_index).val(thr_Dnt_Ppt+rThr_Dnt_Ppt);
	$("#sum_Two_Dnt_Ppt"+_index).val(two_Dnt_Ppt+rTwo_Dnt_Ppt);
	$("#sum_Grp_Nbr"+_index).val(grp_Nbr+rGrp_Nbr);
	var totalNbr = two_Tak_Ppt+ful_Pce_Ppt+nne_Dnt_Ppt+eht_Five_Dnt_Ppt+eht_Dnt_Ppt+sen_Five_Dnt_Ppt+sen_Dnt_Ppt+six_Dnt_Ppt+fve_Dnt_Ppt+fur_Fve_Dnt_Ppt+fur_Dnt_Ppt+thr_Dnt_Ppt+two_Dnt_Ppt+grp_Nbr;
	var rTotalNbr = rTwo_Tak_Ppt+rFul_Pce_Ppt+rNne_Dnt_Ppt+rEht_Five_Dnt_Ppt+rEht_Dnt_Ppt+rSen_Five_Dnt_Ppt+rSen_Dnt_Ppt+rSix_Dnt_Ppt+rFve_Dnt_Ppt+rFur_Fve_Dnt_Ppt+rFur_Dnt_Ppt+rThr_Dnt_Ppt+rTwo_Dnt_Ppt+rGrp_Nbr;
	$('#pgs_Per_Cls'+_index).val(totalNbr);
	$('#rPgs_Per_Cls'+_index).val(rTotalNbr);
	$('#sum_Pgs_Per_Cls'+_index).val(totalNbr+rTotalNbr);
	$('#fit'+_index).val(totalNbr-grp_Nbr);
	$('#rFit'+_index).val(rTotalNbr-rGrp_Nbr);
	$('#sum_Fit'+_index).val(totalNbr-grp_Nbr+rTotalNbr-rGrp_Nbr);
	var fitInc = (two_Tak_Ppt*1.5+ful_Pce_Ppt*1+nne_Dnt_Ppt*0.9+eht_Five_Dnt_Ppt*0.85+eht_Dnt_Ppt*0.8+sen_Five_Dnt_Ppt*0.75+sen_Dnt_Ppt*0.7+six_Dnt_Ppt*0.6+fve_Dnt_Ppt*0.5+fur_Fve_Dnt_Ppt*0.45+fur_Dnt_Ppt*0.4+thr_Dnt_Ppt*0.3+two_Dnt_Ppt*0.2)*yb;
	var rFitInc = (rTwo_Tak_Ppt*1.5+rFul_Pce_Ppt*1+rNne_Dnt_Ppt*0.9+rEht_Five_Dnt_Ppt*0.85+rEht_Dnt_Ppt*0.8+rSen_Five_Dnt_Ppt*0.75+rSen_Dnt_Ppt*0.7+rSix_Dnt_Ppt*0.6+rFve_Dnt_Ppt*0.5+rFur_Fve_Dnt_Ppt*0.45+rFur_Dnt_Ppt*0.4+rThr_Dnt_Ppt*0.3+rTwo_Dnt_Ppt*0.2)*rYb;
	$('#fit_Income'+_index).val(fitInc.toFixed(2));
	$('#rFit_Income'+_index).val(rFitInc.toFixed(2));
	$('#sum_Fit_Income'+_index).val((fitInc+rFitInc).toFixed(2));
	var grpIne = grp_Nbr*grp_Prc;
	var rGrpIne = rGrp_Nbr*rGrp_Prc;
	$('#grp_Ine'+_index).val(grpIne.toFixed(2));
	$('#rGrp_Ine'+_index).val(rGrpIne.toFixed(2));
	$('#sum_Grp_Ine'+_index).val((grpIne+rGrpIne).toFixed(2));
	var totalNumber = fitInc+grp_Nbr*grp_Prc;
	var rTotalNumber = rFitInc+rGrp_Nbr*rGrp_Prc;
	$('#totalNumber'+_index).val(totalNumber.toFixed(2));
	$('#rTotalNumber'+_index).val(rTotalNumber.toFixed(2));
	$('#sum_TotalNumber'+_index).val((totalNumber+rTotalNumber).toFixed(2));
	var avg_Dis = totalNbr==0?0:((fitInc+grp_Nbr*0.3*yb)/totalNbr/yb).toFixed(2);
	var rAvg_Dis = rTotalNbr==0?0:((rFitInc+rGrp_Nbr*0.3*rYb)/rTotalNbr/rYb).toFixed(2);
	$('#avg_Dis'+_index).val(avg_Dis);
	$('#rAvg_Dis'+_index).val(rAvg_Dis);
	$('#sum_Avg_Dis'+_index).val(parseFloat(avg_Dis)+parseFloat(rAvg_Dis));
	$('#hourIncome'+_index).val(totalTime==0?0:((totalNumber+rTotalNumber)/totalTime).toFixed(2));
	$('#plf'+_index).val(siteCount==0?0:(((totalNbr+rTotalNbr)/(2*siteCount))*100).toFixed(2));
}

function deleteCabinSeatSet(seasonId){
	var fltNbr = $('#flt_nbr_Count').val();
	if(fltNbr.indexOf('/')){
		alert("请选择一个航班号");
		return;
	}
	$.ajax({
		url:'${pageContext.request.contextPath}/deleteCabinSeatSet',
		data:{
			seasonId:seasonId,
			fltNbr:fltNbr
		},
		type:'post',
		success:function(data){
			if(data!=null){
				alert(data.result);
				getCabinSetData();
			}else{
				alert("服务器繁忙，请稍后再试");
			}
		}
	});
}
</script>